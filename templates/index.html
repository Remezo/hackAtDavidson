<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Scooper</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
 
</head>
<body>

<main class="flex-shrink-0">
  <div class="container">
    <div class="row justify-content-center mt-5">
      <div class="col-md-6">
        <div id="list-group" class="list-group w-auto"></div>
      </div>
    </div>

    <div class="row justify-content-center mt-3">
      <div class="col-md-6">
        <div class="input-group mb-3">
          <div class="custom-file">
            <input type="file" class="custom-file-input" id="chat-input" accept=".mp3,.wav,.ogg,.flac,.txt">
            <label class="custom-file-label" for="chat-input">Choose file</label>
          </div>
          <div class="input-group-append">
            <button id="gpt-button" class="custom-button" onclick="processTranscript()">Submit</button>
          </div>
        </div>
      </div>
    </div>

    <div class="row justify-content-center mt-3">
      <div class="col-md-6">
        <div id="result"></div>
      </div>
    </div>
  </div>
</main>

<script src="https://code.jquery.com/jquery-3.6.3.min.js" integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
<script>
  function processTranscript() {
    var fileInput = document.getElementById('chat-input');
    var file = fileInput.files[0];

    var reader = new FileReader();

    reader.onload = function(event) {
      var content = event.target.result;
      console.log('Transcript Text:', content);

      $.ajax({
        type: "POST",
        url: "/",
        data: {"content": content},
        success: function(data) {
          console.log(data)
          $('#result').html(data);
        }
      });
    };

    reader.readAsText(file);
  }
</script>

</body>
</html>
